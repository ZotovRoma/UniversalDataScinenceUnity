# АНАЛИЗ ДАННЫХ И ИСКУССТВЕННЫЙ ИНТЕЛЛЕКТ [in GameDev]
Отчет по лабораторной работе #2 выполнил(а):
- Зотов Роман Сергеевич
- ФО-230006
Отметка о выполнении заданий (заполняется студентом):

| Задание | Выполнение | Баллы |
| ------ | ------ | ------ |
| Задание 1 | * | 60 |
| Задание 2 | * | 20 |
| Задание 3 | * | 20 |

знак "*" - задание выполнено; знак "#" - задание не выполнено;

Работу проверили:
- к.т.н., доцент Денисов Д.В.
- к.э.н., доцент Панов М.А.
- ст. преп., Фадеев В.О.

[![N|Solid](https://cldup.com/dTxpPi9lDf.thumb.png)](https://nodesource.com/products/nsolid)

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

Структура отчета

- Данные о работе: название работы, фио, группа, выполненные задания.
- Цель работы.
- Задание 1.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Задание 2.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Задание 3.
- Код реализации выполнения задания. Визуализация результатов выполнения (если применимо).
- Выводы.
- ✨Magic ✨

## Цель работы
научиться передавать в Unity данные из Google Sheets с помощью Python.

Ход работы:

## Задание 1
### Выберите одну из игровых переменных в игре СПАСТИ РТФ: Выживание (HP, SP, игровая валюта, здоровье и т.д.), опишите её роль в игре, условия изменения / появления и диапазон допустимых значений. Постройте схему экономической модели в игре и укажите место выбранного ресурса в ней.


Я выбрал переменную игровой Валюты "RTF-Coin". RTF-Coin представляет собой валюту, за которую можно покупать улучшения в магазине улучшений. RTF-Coin можно добыть, убивая зомби. При этом чем больше улучшенйи ты купил в магазине, тем легче тебе убивать зомби и, следовательно, легче получать RTF-Coin, что ведёт к увеличению их количества. RTF-Coin находятся в диапазоне от 0, до, наверное, +бесконечности. Во всяком случае, во время игры мне не удалось достичь какого-либо предела.

Схема экономической модели RTF-Coin выглядит следующим образом: 

![](https://downloader.disk.yandex.ru/preview/99d8499fb23a9bd8764fcba655c1ee99915bf85369795d6351a430d6c279dc82/673a4cd9/F7xpV5LaJ1okhX-aGJFVo24TFDm_olX6zySS0AHqDyrnrG9OH5Ffv2bcDmUGJ_K-M4lqf6bvPJ_zWNpEYJWESQ%3D%3D?uid=0&filename=88.jpg&disposition=inline&hash=&limit=0&content_type=image%2Fjpeg&owner_uid=0&tknv=v2&size=1920x868)

## Задание 2
### С помощью скрипта на языке Python заполните google-таблицу данными, описывающими выбранную игровую переменную в игре “СПАСТИ РТФ:Выживание”. Средствами google-sheets визуализируйте данные в google-таблице (постройте график / диаграмму и пр.) для наглядного представления выбранной игровой величины. Опишите характер изменения этой величины, опишите недостатки в реализации этой величины (например, в игре может произойти условие наступления эксплойта) и предложите до 3-х вариантов модификации условий работы с переменной, чтобы сделать игровой опыт лучше.

Скрипт:

```py
import gspread
import numpy as np

gc = gspread.service_account(filename='universal-datascience-61c84fd63e70.json')
sh = gc.open("RTF-Coin Sheet")
rtf_coin = 0

shop_costs=[5, 20, 25, 30, 45, 600, 1500, 5000, 10000]


def update_sheet(middle_string):
    sh.sheet1.update([[str(i-1)]], f'A{i}')
    sh.sheet1.update([[middle_string]], f'B{i}')
    sh.sheet1.update([[str(rtf_coin)]], f'C{i}')

def generate_headers():
    sh.sheet1.update([["№"]], 'A1')
    sh.sheet1.update([["Сообщение"]], 'B1')
    sh.sheet1.update([["Текущие rtf_coin"]], 'C1')

generate_headers()
np.random.seed(42)
for i in range(2, 22):
    rtf_coin+=5
    is_shop_appear = np.random.sample()
    if is_shop_appear < 0.3:
        update_sheet("Магазин не появился")
        continue
    shop_index = np.random.randint(0, len(shop_costs))
    if shop_costs[shop_index] > rtf_coin:
        update_sheet(f"Не хватает монет на желаемый предмет, стоимостью {shop_costs[shop_index]}")
    else:
        rtf_coin-=shop_costs[shop_index]
        update_sheet(f"Купил предмет стоимостью {shop_costs[shop_index]}")

```

Визуализация всех данных представлена в гугл-таблице: https://docs.google.com/spreadsheets/d/1OkZCE3zfbhSx-TEZqNgHsQX_fW4o_VRaxiZLxwojLs0/edit?usp=sharing

Из графика наглядно видно, что величина RTF-Coin изменяется скачкаобразным образом. Сначала она накапливается, но, после того, как нам хватает RTF-Coin на покупку желаемого улучшения, то их количество соответственно падает. Основным недостатком данной величины является отсутствие ограничения сверху, что может привести к её переполнению при слишком успешной игре. В качестве улучшений реализации этой переменной для улучшения игрвого опыта я могу предложить следующее:

* Можно добавить выпадение RTF-Coin разного номинала (1, 5, 10 и т.д.). Для выпадения каждого номинала создать свою редкость (чем больше номинал, тем меньше шанс выпадения). Это ускорит накопление RTF-Coin для желаемых улучшений в конце игры и уменьшит эффект "гриндилки". На данный момент в магазине есть позиции на 10000 монет, но у нас выпадает за одного противника лишь 1 монета, что ставит вопрос о достижимости данной суммы вообще
  
* Можно изменить разрыв цены позиций в магазине. Сейчас самое дешёвое улучшение стоит 5 монет, в то время как самое дорогое 10000. Это довольно большой разрыв, который не строится на увеличении объёмов заработка, так как это увеличение совершенно минимально. Соответственно такой разры не имеет за собой никаких обоснований 

## Задание 3
### Настройте на сцене Unity воспроизведение звуковых файлов, описывающих динамику изменения выбранной переменной. Например, если выбрано здоровье главного персонажа вы можете выводить сообщения, связанные с его состоянием.

Введём условие, что если монет меньше 20, то это очень плохо. Если монет от 20 до 40, то это средненько. А если монет 40 и больше, то это просто замечательно. В таком случае метод Update будет выглядеть следующим образом:

```cs
void Update()
{
    if (dataSet["Mon_" + i.ToString()] >= 40 & statusStart == false & i != dataSet.Count)
    {
        StartCoroutine(PlaySelectAudioGood());
        Debug.Log(dataSet["Mon_" + i.ToString()]);
    }

    if (dataSet["Mon_" + i.ToString()] < 40 & dataSet["Mon_" + i.ToString()] > 20 & statusStart == false & i != dataSet.Count)
    {
        StartCoroutine(PlaySelectAudioNormal());
        Debug.Log(dataSet["Mon_" + i.ToString()]);
    }

    if (dataSet["Mon_" + i.ToString()] <= 20 & statusStart == false & i != dataSet.Count)
    {
        StartCoroutine(PlaySelectAudioBad());
        Debug.Log(dataSet["Mon_" + i.ToString()]);
    }
}
```

## Выводы

В ходе лабораторной работы я смог получить API ключ гугл-таблиц, заполнил их с помощью Python, после чего создал интерактивное взаимодействие с таблицей в Unity

Цели лабораторной работы были достигнуты.
## Powered by

**BigDigital Team: Denisov | Fadeev | Panov**
